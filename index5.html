<html>
<head>
<meta charset="UTF-8">
<title>Pesquisa sobre Covid-19</title>
<link rel="stylesheet" href="css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="questions.js"></script>
<script src="js/database.js"></script>
<script src="js/script.js"></script>
</head>

  
<body>
  <div id="content" class="content">
    
    <h1>Questionário 4</h1>

    <div class="code">
      <p>Para continuar a pesquisa, insira o seu código no campo abaixo:</p>
      <input type="text" id="code" name="code" value=""/>
    </div>
    
  </div>

  <div id="success" class="content" style="display: none;">
    <p>Obrigado por colaborar com a pesquisa. Anote o código abaixo para resgatar o seu prêmio.</p>
    <p id="codigo"></p>
    <p>Siga para a <a id='next' href="index6.html?code=">próxima etapa</a></p>
  </div>

  <div class="center"><button onclick="saveAnswers('autoengano',autoengano)">Enviar respostas</button></div>
  
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCDoF7uuat1KKsxidYXieg1r_B5ql9yLx4",
      authDomain: "covid-survey-7a0c6.firebaseapp.com",
      databaseURL: "https://covid-survey-7a0c6.firebaseio.com",
      projectId: "covid-survey-7a0c6",
      storageBucket: "covid-survey-7a0c6.appspot.com",
      messagingSenderId: "216921647928",
      appId: "1:216921647928:web:a2ef9d08c002050379efcd"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    $('document').ready(function(){

      // Seta o codigo do respondente
      var url = new URL(window.location.href);
      var code = url.searchParams.get("code");
      if(code != null) {
        $('#code').val(code);
      }
      
      var count = 1;
      $.each( autoengano, function( key, value ) {

        // Pergunta
        var question = createQuestion(count, key, value);
        $("#content").append(question);

        // Opcoes de resposta
        if(value.options == '1-7')
          var options = createOptions1_7(question, key, value);
        else if(value.options == 'yes_no')
          var options = createOptionsYN(question, key, value);
        else if(value.options == 'list')
          var options = createOptionsList(question, key, value);
        else if(value.options == 'check-list')
          var options = createOptionsCheckList(question, key, value);

        // Incrementa pergunta
        count++;

      });
    });
  </script>

</body>
</html>
